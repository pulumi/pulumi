name: Pubilshes CLI binaries.

on:
  workflow_call:
    inputs:
      goreleaser-config:
        description: 'Config file for goreleaser; must match the goreleaser-config build.yml was called with'
        default: '.goreleaser.prerelease.yml'
        required: false
        type: string
      goreleaser-flags:
        description: 'Command-line flags to pass to goreleaser'
        default: '-p 3 --snapshot --skip-validate'
        required: false
        type: string
      goreleaser-build-flags:
        description: 'The goreleaser-flags arg that build.yml was called with'
        required: true
        type: string
    secrets: {}

env:
  GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

jobs:
  publish_pulumi_go_binaries:
    name: Publish Pulumi Go binaries
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repo
        uses: actions/checkout@v2
        with:
          ref: ${{ env.PR_COMMIT_SHA }}
